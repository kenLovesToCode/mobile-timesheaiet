# Epic 2 Retrospective - Instant Price Lookup and Contribution Loop

Date: 2026-02-26
Project: priceTag
Epic: 2 - Instant Price Lookup and Contribution Loop
Retrospective Type: Epic completion review (facilitated from implementation artifacts + user feedback)

## Scope and Inputs Reviewed

- Sprint tracking: `_bmad-output/implementation-artifacts/sprint-status.yaml`
- Story records: `2-1` through `2-7` implementation artifacts
- Planning context: `_bmad-output/planning-artifacts/epics.md`, `prd.md`, `architecture.md`
- Prior retrospective: `_bmad-output/implementation-artifacts/epic-1-retro-2026-02-25.md`
- User feedback (runtime UX): navigation confusion, Results entry without barcode context

## Epic Completion Verification

Epic 2 story statuses in `sprint-status.yaml` on review:

- `2-1-store-setup-and-active-gating`: `done`
- `2-2-add-or-edit-price-and-product-info`: `done`
- `2-3-results-view-for-active-stores`: `done`
- `2-4-scan-flow-with-haptics-and-torch`: `done`
- `2-5-fallback-to-manual-entry-and-recent-scans`: `done`
- `2-6-permission-denied-and-empty-state-handling`: `done`
- `2-7-non-blocking-flow-behavior`: `done`

Result:

- Stories completed: 7/7
- Epic completion by story status: complete

## Participants (Retrospective Context)

- sensei (Project Lead)
- Bob (Scrum Master) - facilitation role
- Charlie (Senior Dev)
- Dana (QA Engineer)
- Alice (Product Owner)
- Elena (Junior Dev)

## What Went Well

- Core scan → results → add/edit loop is functional and fast in practice.
- Unified fallback path (scan timeout + permission denied/unavailable) reduced dead ends.
- Non-blocking flow behavior improved (cancel/back and re-entry are safe).
- Story-level Jest coverage expanded across scan/results/fallback/non-blocking flows.
- Platform boundaries (adapters, thin routes, feature modules) stayed consistent.

## Challenges and Friction

- Navigation structure is unclear (no bottom nav, inconsistent entry paths).
- Results can be opened without barcode context, leading to a confusing error state.
- Evidence rigor and performance proof created heavy review churn in Story 2.2 and 2.4.
- Some artifacts record fixes without re-running tests, reducing traceable confidence.

## Cross-Story Patterns (Observed)

### Common Struggles

- Context-required screens (Results/Add Price) were too reachable without guardrails.
- Duplicate-action prevention (latches, submit guards, nav guards) needed repeated fixes.
- Focus-based refresh and stale state on re-entry appeared multiple times before stabilizing.

### Recurring Review Feedback Themes

- Avoid over-claiming runtime performance without device evidence.
- Scope performance instrumentation to the correct context (barcode/session).
- Keep navigation and entry flow clear for context-dependent screens.

### Breakthrough Moments

- Scan/results performance instrumentation matured into reusable patterns.
- Fallback UX consolidation simplified scan-timeout and permission-denied flows.
- Fail-closed barcode handling prevented wrong-context data edits.

## Previous Retrospective Follow-Through (Epic 1)

Action items from Epic 1 retro:

1. Evidence checklist in story artifacts
2. Claim vs. evidence final review pass
3. Track `setup-zeego` warning with documented issue
4. Reconcile Epic 1 tracker state
5. Define Epic 2 runtime evidence plan

Follow-through observed:

- Tracker reconciliation: completed (`epic-1` is `done`).
- Evidence plan: partially applied (instrumentation exists, but churn remained).
- Evidence checklist discipline: inconsistent across stories.
- `setup-zeego` warning documentation: not visible in Epic 2 artifacts.

## Epic 3 Preview (Next Epic Preparation)

Epic 3: In-Store Shopping List

Planned stories:

- 3.1 Add to Shopping List with Quantity
- 3.2 Dedupe by Barcode and Adjust Quantity
- 3.3 Check Items In Cart and View List

Dependencies on Epic 2:

- Stable Results context and barcode flow
- Offline persistence patterns
- Non-blocking flow discipline

Gaps to address before Epic 3:

- Navigation model (bottom nav + entry flow)
- Home/root screen that orients users
- Results entry fix to avoid missing-barcode error by default
- Epic 3 story alignment to the new navigation model

## Significant Discovery Check (Epic Plan Impact)

Conclusion: Epic 3 requires an update before kickoff.

Why:

- Navigation structure is not defined, and Results can be opened without barcode context.
- These create a user-facing break in core flow, and Epic 3 assumes stable entry paths.

Required action:

- Hold an Epic 3 planning review to update stories based on new navigation + home flow.

## Action Plan (Owned, Specific, No-Blame)

### Process Improvements

1. Add a lightweight evidence checklist to all new story artifacts.
   - Owner: Bob (Scrum Master)
   - Success criteria: Every new story includes an evidence checklist before dev starts.

2. Add a “claim vs. evidence” review pass before stories move to `done`.
   - Owner: Dana (QA Engineer)
   - Success criteria: No story is marked `done` without explicit evidence notes.

### Technical Debt / UX Gaps

1. Implement bottom navigation + primary flow entry points.
   - Owner: Charlie (Senior Dev)
   - Success criteria: Scan/Results/Stores/List are reachable via a consistent nav model.

2. Fix Results entry so it never lands in missing-barcode error by default.
   - Owner: Charlie (Senior Dev)
   - Success criteria: Results is only reachable with valid context or routes to Scan.

3. Create a clear Home/root screen (first-launch experience).
   - Owner: Alice (Product Owner) + Sally (UX Designer) + Charlie (Senior Dev)
   - Success criteria: Home screen orients users and guides them into Scan/Stores/Results.

4. Re-audit Epic 3 stories to align with new navigation + home flow.
   - Owner: Alice (Product Owner) + Bob (Scrum Master)
   - Success criteria: Epic 3 stories explicitly reference the updated navigation flow.

### Documentation

1. Document the `setup-zeego` warning with impact and current status.
   - Owner: Charlie (Senior Dev)
   - Success criteria: Known warning is documented with current behavior and decision.

### Team Agreements

- Navigation flow and entry points are product requirements, not “nice to have.”
- Context-dependent screens must be protected by flow design, not error states alone.
- Evidence collection is part of implementation, not post-hoc cleanup.

## Preparation Tasks for Epic 3 (Stabilization Pass)

**Critical (blockers before Epic 3 starts):**

- Bottom navigation + primary entry flow
- Results entry fix (no missing-barcode first view)
- Home/root screen
- Epic 3 story re-alignment with navigation flow

**Parallel (can be done alongside stabilization):**

- Add navigation regression tests (Results entry, tab routing, Scan entry)
- Evidence checklist template in story artifacts

**Nice-to-have:**

- `setup-zeego` warning documentation

## Readiness Assessment (Epic 2)

- Epic 2 is complete from a story-tracking perspective.
- Epic 2 is NOT considered release-ready; a stabilization pass is required.
- Epic 3 should not begin until navigation + Home + Results entry fixes are complete.

## Commitments for Next Phase

- Complete stabilization pass before Epic 3 starts.
- Update Epic 3 stories to reflect navigation and entry flow realities.
- Keep evidence rigor while reducing review churn through a lightweight checklist.

## Retrospective Outcome

- Epic 2 retrospective complete
- Epic 3 plan requires update
- Stabilization pass is approved and required before Epic 3 kickoff
